<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Office Viz</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #141b32;
      --line: #2b3a67;
      --text: #e8edff;
      --muted: #9fb0e8;
      --accent: #5eead4;
      --kitchen: #3b2a4c;
      --room: #1f2a4a;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at 20% 10%, #1a2452, var(--bg));
      color: var(--text);
      min-height: 100vh;
      padding: 16px;
    }
    h1 { margin: 0 0 10px; font-size: 24px; }
    .subtitle { color: var(--muted); margin-bottom: 12px; }

    .layout {
      display: grid;
      grid-template-columns: repeat(12, minmax(40px, 1fr));
      gap: 10px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .zone {
      border: 1px solid var(--line);
      border-radius: 14px;
      background: color-mix(in srgb, var(--panel) 90%, black);
      padding: 10px;
      min-height: 170px;
      position: relative;
      overflow: hidden;
    }

    .zone h3 {
      margin: 0 0 8px;
      font-size: 14px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: .08em;
    }

    .common-office { grid-column: span 8; min-height: 360px; }
    .kitchen { grid-column: span 4; background: color-mix(in srgb, var(--kitchen) 70%, #0b1020); }
    .rooms { grid-column: span 12; display: grid; grid-template-columns: repeat(4, minmax(160px, 1fr)); gap: 10px; }

    .room {
      background: color-mix(in srgb, var(--room) 80%, #0b1020);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 8px;
      min-height: 150px;
    }

    .bed {
      width: 68px;
      height: 30px;
      border-radius: 8px;
      background: linear-gradient(135deg, #7dd3fc, #60a5fa);
      box-shadow: inset 0 -8px 0 rgba(0,0,0,.12);
      margin-top: 6px;
    }

    .agent {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid #41558f;
      border-radius: 999px;
      padding: 4px 8px;
      margin: 4px;
      background: rgba(255,255,255,.04);
      font-size: 12px;
      transition: transform .2s ease, background .2s ease;
    }

    .agent.active {
      background: rgba(94, 234, 212, .15);
      transform: translateY(-1px);
      border-color: #57d8c3;
    }

    .relationship {
      font-size: 12px;
      color: var(--muted);
      margin: 3px 0;
    }

    .statusbar {
      margin-top: 12px;
      max-width: 1200px;
      margin-inline: auto;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(20,27,50,.7);
      color: var(--muted);
    }

    .controls { margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap; }
    button {
      background: #3a4f87;
      color: #fff;
      border: 1px solid #5770b8;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
    }
    button:hover { filter: brightness(1.1); }

    .log {
      margin-top: 8px;
      font-size: 12px;
      color: #b9c7f5;
      min-height: 18px;
    }

    @media (max-width: 960px) {
      .common-office, .kitchen { grid-column: span 12; }
      .rooms { grid-template-columns: repeat(2, minmax(160px, 1fr)); }
    }
  </style>
</head>
<body>
  <h1>üè¢ Agent Office Viz</h1>
  <div class="subtitle">2D —Å—Ü–µ–Ω–∞: –∫–æ–º–Ω–∞—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤, –æ–±—â–∏–π –æ—Ñ–∏—Å –∏ –∫—É—Ö–Ω—è —Å –∂–∏–≤—ã–º–∏ –≤—Å—Ç—Ä–µ—á–∞–º–∏.</div>

  <div class="layout">
    <section class="zone common-office" id="office">
      <h3>–û–±—â–∏–π –æ—Ñ–∏—Å</h3>
      <div id="officeAgents"></div>
      <div class="log" id="officeLog"></div>
    </section>

    <section class="zone kitchen" id="kitchen">
      <h3>–ö—É—Ö–Ω—è / –æ–±–º–µ–Ω –æ–ø—ã—Ç–æ–º</h3>
      <div id="kitchenAgents"></div>
      <div class="log" id="kitchenLog">–ü–æ–∫–∞ —Ç–∏—Ö–æ. –ö–æ—Ñ–µ –≥—Ä–µ–µ—Ç—Å—è.</div>
    </section>

    <section class="rooms" id="rooms"></section>
  </div>

  <div class="statusbar">
    <strong>Pipeline:</strong> Arthur ‚Üí Invoker (CTO) ‚Üí PM/Designer ‚Üí Engineers ‚Üí QA ‚Üí Invoker review ‚Üí Arthur report
    <div class="controls">
      <button onclick="toggleRun()">‚èØ –°—Ç–∞—Ä—Ç/–ü–∞—É–∑–∞</button>
      <button onclick="tick(true)">‚è≠ –°–ª–µ–¥—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ</button>
      <button onclick="resetSim()">üîÑ –°–±—Ä–æ—Å</button>
    </div>
    <div class="log" id="globalLog"></div>
  </div>

  <script>
    const agents = [
      { id: 'arthur', name: 'Arthur ‚ôä', icon: 'üß≠', role: 'Orchestrator', relation: '–î—Ä—É–∂–∏—Ç —Å Invoker', room: '–ö–æ–º–Ω–∞—Ç–∞ Arthur' },
      { id: 'bruce', name: 'Invoker', icon: 'üé©', role: 'CTO', relation: '–ü–ª–æ—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PM –∏ Dev', room: '–ö–æ–º–Ω–∞—Ç–∞ Invoker' },
      { id: 'chen', name: 'Chen', icon: 'üìã', role: 'PM', relation: '–•–æ—Ä–æ—à–∏–π —Ç–∞–Ω–¥–µ–º —Å –¥–∏–∑–∞–π–Ω–µ—Ä–æ–º', room: '–ö–æ–º–Ω–∞—Ç–∞ Chen' },
      { id: 'designer', name: 'Juggernaut', icon: 'üé®', role: 'Designer', relation: '–ö–æ–ª–ª–µ–≥–∞ Dev, –¥—Ä—É–∂–∏—Ç —Å PM', room: '–ö–æ–º–Ω–∞—Ç–∞ Designer' },
      { id: 'tinker', name: 'Tinker', icon: 'üíª', role: 'Engineer', relation: '–ö–æ–ª–ª–µ–≥–∞ QA', room: '–ö–æ–º–Ω–∞—Ç–∞ Tinker' },
      { id: 'oracle', name: 'Oracle', icon: 'üîÆ', role: 'Data', relation: '–ö–æ–ª–ª–µ–≥–∞ Io', room: '–ö–æ–º–Ω–∞—Ç–∞ Oracle' },
      { id: 'io', name: 'Io', icon: '‚öôÔ∏è', role: 'MLOps', relation: '–ö–æ–ª–ª–µ–≥–∞ Oracle', room: '–ö–æ–º–Ω–∞—Ç–∞ Io' },
      { id: 'qa', name: 'Bounty Hunter', icon: 'üõ°Ô∏è', role: 'QA', relation: '–ñ—ë—Å—Ç–∫–∏–π, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π', room: '–ö–æ–º–Ω–∞—Ç–∞ QA' }
    ];

    const stages = [
      { name: 'Arthur —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á—É', office: ['arthur'], kitchen: [] },
      { name: 'Invoker –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–µ—Ç –∏ —Ä–∞–∑–¥–∞—ë—Ç', office: ['bruce', 'chen', 'designer'], kitchen: [] },
      { name: '–ò–Ω–∂–µ–Ω–µ—Ä—ã —Å—Ç—Ä–æ—è—Ç —Ñ–∏—á–∏', office: ['tinker', 'oracle', 'io'], kitchen: ['chen'] },
      { name: 'QA –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –ª–æ–≤–∏—Ç –±–∞–≥–∏', office: ['qa', 'tinker'], kitchen: [] },
      { name: 'Invoker —Ä–µ–≤—å—é–∏—Ç –∏ –∞–ø—Ä—É–≤–∏—Ç', office: ['bruce', 'qa'], kitchen: ['designer'] },
      { name: 'Arthur –ø—Ä–æ–≤–µ—Ä—è–µ—Ç URL –∏ —Ä–µ–ø–æ—Ä—Ç–∏—Ç', office: ['arthur', 'bruce'], kitchen: ['chen', 'tinker'] }
    ];

    let stage = 0;
    let running = false;
    let timer = null;

    function agentChip(a, active = false) {
      return `<div class="agent ${active ? 'active' : ''}">${a.icon} ${a.name}</div>`;
    }

    function drawRooms() {
      const rooms = document.getElementById('rooms');
      rooms.innerHTML = agents.map(a => `
        <article class="room" id="room-${a.id}">
          <h3>${a.room}</h3>
          ${agentChip(a)}
          <div class="relationship">${a.role}</div>
          <div class="relationship">ü§ù ${a.relation}</div>
          <div class="bed" title="–ö—Ä–æ–≤–∞—Ç—å"></div>
        </article>
      `).join('');
    }

    function tick(manual = false) {
      const s = stages[stage];
      const officeSet = new Set(s.office);
      const kitchenSet = new Set(s.kitchen);

      document.getElementById('officeAgents').innerHTML = agents
        .filter(a => officeSet.has(a.id))
        .map(a => agentChip(a, true)).join('') || '<span class="relationship">–û—Ñ–∏—Å –ø—É—Å—Ç.</span>';

      document.getElementById('kitchenAgents').innerHTML = agents
        .filter(a => kitchenSet.has(a.id))
        .map(a => agentChip(a, true)).join('') || '<span class="relationship">–ù–∏–∫–æ–≥–æ, —Ç–æ–ª—å–∫–æ –∫—Ä—É–∂–∫–∏.</span>';

      document.getElementById('officeLog').textContent = `–°—Ü–µ–Ω–∞: ${s.name}`;
      document.getElementById('kitchenLog').textContent = kitchenSet.size
        ? '–ù–∞ –∫—É—Ö–Ω–µ –¥–µ–ª—è—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –æ–ø—ã—Ç–æ–º.'
        : '–ö—É—Ö–Ω—è –∂–¥—ë—Ç —Å–ª–µ–¥—É—é—â–∏–π –º–∏—Ç–∞–ø.';

      document.getElementById('globalLog').textContent = manual
        ? `–†—É—á–Ω–æ–π —à–∞–≥: ${s.name}`
        : `–ê–≤—Ç–æ: ${s.name}`;

      stage = (stage + 1) % stages.length;
    }

    function loop() {
      if (!running) return;
      tick();
      timer = setTimeout(loop, 2800);
    }

    function toggleRun() {
      running = !running;
      if (running) loop();
      else clearTimeout(timer);
    }

    function resetSim() {
      running = false;
      clearTimeout(timer);
      stage = 0;
      tick(true);
      document.getElementById('globalLog').textContent = '–°–∏–º—É–ª—è—Ü–∏—è —Å–±—Ä–æ—à–µ–Ω–∞.';
    }

    drawRooms();
    tick(true);
  </script>
</body>
</html>